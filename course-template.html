<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Course Review</title>
    <link rel="stylesheet" href="/style.css" />
</head>
<body>
    <div class="course-detail">
        <h1 id="course-code">Loading...</h1>
        <div id="reviews-container"></div>
        <a href="/index.html" class="back-link">‚Üê Back</a>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const courseCode = urlParams.get('code');

        fetch('/data/reviews.json')
            .then(response => response.json())
            .then(reviews => {
                // Find ALL reviews for this course
                const courseReviews = reviews.filter(r => r.courseCode === courseCode);
                
                if (courseReviews.length > 0) {
                    document.getElementById('page-title').textContent = courseCode;
                    document.getElementById('course-code').textContent = courseCode;
                    
                    const container = document.getElementById('reviews-container');
                    
                    // Display each review in separate content-box containers
                    courseReviews.forEach((review, index) => {
                        const reviewDiv = document.createElement('div');
                        reviewDiv.className = 'content-box';
                        reviewDiv.innerHTML = `
                            <p class="instructor-name">${review.professor}</p>
                            <p class="instructor-desc">${review.review}</p>
                            <p class="instructor-rate">Rating: ${review.rating}/5</p>
                        `;
                        container.appendChild(reviewDiv);
                    });
                } else {
                    document.getElementById('course-code').textContent = 'Course not found';
                }
            })
            .catch(error => console.error('Error loading reviews:', error));
    </script>
</body>
</html>